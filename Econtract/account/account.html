<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="../main.css">
        <script src="https://kit.fontawesome.com/57bd783e21.js" crossorigin="anonymous"></script>
        <script src="./account.js"></script>
        <script type="text/javascript" src="../node_modules/web3/dist/web3.min.js"></script>
        <script type="text/javascript">
          var web3 = new Web3(Web3.givenProvider || "http://127.0.0.1:8545");

          async function start() {
            try {
              let defaultAccount = await web3.eth.getCoinbase();
              let balance = await web3.eth.getBalance(defaultAccount);

              var html_account = document.getElementById("account");
              var html_balance = document.getElementById("balance");
              html_account.textContent = defaultAccount;
              html_balance.textContent = web3.utils.fromWei(balance, "ether");
            } catch(err) {
              console.error("Error:", err);
            }
          }
          window.addEventListener("load", start);
        </script>

    </head>
    <body>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li class="dropdown">
              <a href="javascript:void(0)" class="dropbtn"><i class="fas fa-bars fa-1g"></i></a>
              <div class="dropdown-content">
                <a href="#home">帳號資訊</a>
                <a href="../create/create.html">創建合約</a>
                <a href="../search/search.html">查詢合約</a>
                <a href="../transaction/transaction.html">系統對帳</a>
                <a href="../login/login.html">登出</a>
              </div>
            </li>
        </ul><br>
        <fieldset>
            <label>Account：</label><span id="account"></span><br>
            <label>Balance：</label><span id="balance"></span><br>        
        </fieldset>
    </body>
</html>